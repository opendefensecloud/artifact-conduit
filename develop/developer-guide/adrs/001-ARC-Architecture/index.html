<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://arc.opendefense.cloud/develop/developer-guide/adrs/001-ARC-Architecture/">
      
      
        <link rel="prev" href="../000-Use-Markdown-Architectural-Decision-Records/">
      
      
        <link rel="next" href="../002-ARC-API/">
      
      
        
      
      
      <link rel="icon" href="../../../arc_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Evaluate Future ARC Architecture Based on Predecessors - Artifact Conduit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/panzoom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style><meta name="panzoom-theme" content="material">
<meta name="panzoom-data" content='{"selectors": [".mermaid", ".d2"], "initial_zoom_level": 1.0}'> </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#evaluate-future-arc-architecture-based-on-predecessors" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Artifact Conduit" class="md-header__button md-logo" aria-label="Artifact Conduit" data-md-component="logo">
      
  <img src="../../../arc_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Artifact Conduit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Evaluate Future ARC Architecture Based on Predecessors
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="black" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/opendefensecloud/artifact-conduit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../user-guide/core-concepts/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../operator-manual/installation/" class="md-tabs__link">
          
  
  
    
  
  Operator Manual

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../CODE_OF_CONDUCT/" class="md-tabs__link">
          
  
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Artifact Conduit" class="md-nav__button md-logo" aria-label="Artifact Conduit" data-md-component="logo">
      
  <img src="../../../arc_logo.png" alt="logo">

    </a>
    Artifact Conduit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opendefensecloud/artifact-conduit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2">
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Custom Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Custom Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/custom-resources/order/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Order Resource
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operator Manual
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operator Manual
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Upgrading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/new-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    New Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operator-manual/workflow-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributor Covenant Code of Conduct
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Artifact Conduit (ARC) Developer Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Definition of Done
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../working-with-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ADRs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    ADRs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../000-Use-Markdown-Architectural-Decision-Records/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Find a Common Way to Document Architectural Design Decsisions
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Evaluate Future ARC Architecture Based on Predecessors
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--accepted"></span>
  

  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluate Future ARC Architecture Based on Predecessors
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--accepted"></span>
  

  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context-and-problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context and Problem Statement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context and Problem Statement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Glossary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#considered-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considered Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Considered Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-kubernetes-operators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classic Kubernetes Operators
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classic Kubernetes Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pros
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cons
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-api-server-and-cncf-landscape-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extension API Server and CNCF Landscape Tooling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension API Server and CNCF Landscape Tooling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flavor-a" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor A
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-b" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor B
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor C
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-d" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor D
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-e" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor E
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#technology" class="md-nav__link">
    <span class="md-ellipsis">
      
        Technology
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Diagram
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pros
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cons_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cons
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision Outcome
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../002-ARC-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Define an Optimal API for the Project Beginning
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--in decission"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context-and-problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context and Problem Statement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context and Problem Statement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Glossary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#considered-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considered Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Considered Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-kubernetes-operators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classic Kubernetes Operators
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classic Kubernetes Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pros
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cons
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-api-server-and-cncf-landscape-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extension API Server and CNCF Landscape Tooling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension API Server and CNCF Landscape Tooling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flavor-a" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor A
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-b" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor B
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor C
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-d" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor D
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flavor-e" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flavor E
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#technology" class="md-nav__link">
    <span class="md-ellipsis">
      
        Technology
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Diagram
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pros
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cons_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cons
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision-outcome" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision Outcome
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/opendefensecloud/artifact-conduit/edit/main/docs/developer-guide/adrs/001-ARC-Architecture.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/opendefensecloud/artifact-conduit/raw/main/docs/developer-guide/adrs/001-ARC-Architecture.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


<h1 id="evaluate-future-arc-architecture-based-on-predecessors">Evaluate Future ARC Architecture Based on Predecessors<a class="headerlink" href="#evaluate-future-arc-architecture-based-on-predecessors" title="Permanent link">¶</a></h1>
<h2 id="context-and-problem-statement">Context and Problem Statement<a class="headerlink" href="#context-and-problem-statement" title="Permanent link">¶</a></h2>
<p>This ADR is about finding the right architecture for the ARC suite of services based on the knowledge gained during the internal predecessors of this project.</p>
<h3 id="glossary">Glossary<a class="headerlink" href="#glossary" title="Permanent link">¶</a></h3>
<ul>
<li><code>Order</code>: Represents an order of one or more artifacts. Tracks generation numbers of referenced <code>Endpoints</code> and <code>Secrets</code> to detect changes and trigger <code>ArtifactWorkflow</code> reconciliation for idempotency.</li>
<li><code>ArtifactWorkflow</code>: Represents a single artifact to be processed as part of an <code>Order</code>. Minimal resource containing artifact type reference and source/destination endpoint references. Replaces legacy <code>OrderArtifactWorkflow</code>.</li>
<li><code>ArtifactType</code>: Defines rules, defaults, and the <code>WorkflowTemplate</code> reference for a specific artifact type like 'OCI'. Replaces legacy <code>OrderTypeDefinition</code>.</li>
<li><code>Endpoint</code>: General term for source or destination. Can be a source or destination for artifacts. Includes optional credentials to access it. Changes to <code>Endpoint</code> or its referenced <code>Secret</code> trigger <code>Order</code> reconciliation.</li>
<li><code>WorkflowTemplate</code>: Argo Workflows, see <a href="https://argo-workflows.readthedocs.io/en/latest/fields/#workflowtemplate">https://argo-workflows.readthedocs.io/en/latest/fields/#workflowtemplate</a></li>
<li><code>Workflow</code>: Argo Workflows, see <a href="https://argo-workflows.readthedocs.io/en/latest/fields/#workflow">https://argo-workflows.readthedocs.io/en/latest/fields/#workflow</a></li>
<li><code>ARC API Server</code>: A Kubernetes Extension API Server which handles storage of ARC API</li>
<li><code>ARC Controller Manager</code>: A set of Kubernetes Controller which reconciles <code>Orders</code>, creates/updates <code>ArtifactWorkflow</code> resources from <code>Order</code> artifacts and instantiates <code>Workflow</code> resources for each <code>ArtifactWorkflow</code>. Tracks <code>Endpoint</code> and <code>Secret</code> generations to ensure idempotency.</li>
</ul>
<h2 id="considered-options">Considered Options<a class="headerlink" href="#considered-options" title="Permanent link">¶</a></h2>
<h3 id="classic-kubernetes-operators">Classic Kubernetes Operators<a class="headerlink" href="#classic-kubernetes-operators" title="Permanent link">¶</a></h3>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">CRDs</a> are used to interact with ARC via the Kubernetes API Server.</li>
<li>Several operators come into play which reconcile the different custom resources.</li>
<li>A sharding mechanism is implemented to be able to scale the workers horizontally and give every worker a given chunk of resources to reconcile.</li>
</ul>
<h4 id="pros">Pros<a class="headerlink" href="#pros" title="Permanent link">¶</a></h4>
<ul>
<li>CRDs and Kubernetes are relatively simple to implement</li>
</ul>
<h4 id="cons">Cons<a class="headerlink" href="#cons" title="Permanent link">¶</a></h4>
<ul>
<li>Storage may be limited by <code>etcd</code> and can bring the control plane of Kubernetes into trouble if too many resources are present</li>
<li>The necessity to implement sharding may be hard work and error prone</li>
<li>Thus said it may not scale in way necessary for such a solution</li>
</ul>
<h3 id="extension-api-server-and-cncf-landscape-tooling">Extension API Server and CNCF Landscape Tooling<a class="headerlink" href="#extension-api-server-and-cncf-landscape-tooling" title="Permanent link">¶</a></h3>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../img/0-arc-architecture-arcdb.drawio.svg" data-desc-position="bottom"><img alt="Considered Options" src="../img/0-arc-architecture-arcdb.drawio.svg" title="Considered Options"></a></p>
<h4 id="flavor-a">Flavor A<a class="headerlink" href="#flavor-a" title="Permanent link">¶</a></h4>
<p>Flavor uses several controllers to handle different parts of the API.
Orders are reconciled and converted to hydrated Orders which contain the source and destination information along with the artifact to process.
This information are published to some message queue which is subscribed by workers working on that queue.
Optionally <a href="https://keda.sh/">KEDA</a> is used to scale, handle quotas and fairness.
The database to be used for the API Server is etcd.</p>
<h4 id="flavor-b">Flavor B<a class="headerlink" href="#flavor-b" title="Permanent link">¶</a></h4>
<p>Same as <a href="#flavor-a">Flavor A</a> except the database for the API Server is something like Postgres instead of etcd.
Additionally the option is considered to let the controller access the Postgres directly to reconcile without using the Kubernetes API Server.</p>
<h4 id="flavor-c">Flavor C<a class="headerlink" href="#flavor-c" title="Permanent link">¶</a></h4>
<p>Same as <a href="#flavor-b">Flavor B</a> except that no message queue is used but the job queue is stored directly in the Postgres database.</p>
<h4 id="flavor-d">Flavor D<a class="headerlink" href="#flavor-d" title="Permanent link">¶</a></h4>
<p>Same as <a href="#flavor-a">Flavor A</a> except that no message queue is used.
The Order controller creates hydrated orders directly in <code>etcd</code> as readonly resource which is then consumed by workers directly.
This approach needs some kind of sharding mechanism to have the workers to know which shard of resources they need to handle.</p>
<h4 id="flavor-e">Flavor E<a class="headerlink" href="#flavor-e" title="Permanent link">¶</a></h4>
<p>This flavor is the most compelling due to the reduced amount of code that is necessary to bring this solution to live.
etcd is used as storage for the API server.
Argo Workflows is used to build workflows which do the steps necessary to process one artifact.
Kueue can be used to bring fairness, scaling, quotas into play which workflows.
The order controller creates "jobs" which are actually Argo Workflows.</p>
<p>This option is described in detail in the following document.</p>
<h4 id="technology">Technology<a class="headerlink" href="#technology" title="Permanent link">¶</a></h4>
<ul>
<li>Instead of <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">CRDs</a>, <code>ARC</code> uses an <a href="https://kubernetes.io/docs/tasks/extend-kubernetes/setup-extension-api-server/">Extension API Server</a> via the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/">Kubernetes API Aggregation Layer</a> to handle API requests.</li>
<li>This gives it the possibility to use a dedicated <code>etcd</code> or a even more suitable storage backend for the high amount of resources and status information in case this is necessary.</li>
<li>While <code>etcd</code> still can be used as storage backend, it is one separated from the <code>etcd</code> used by the Kubernetes control plane and reduces the risk of bringing the whole cluster into trouble.</li>
<li>As the storage implementation is under our control, we can implement a custom storage interface or use <code>kind</code> down the line.</li>
<li>Additional links</li>
<li><a href="https://github.com/kubernetes-sigs/apiserver-runtime">https://github.com/kubernetes-sigs/apiserver-runtime</a></li>
<li><a href="https://github.com/kubernetes/sample-apiserver/tree/master">https://github.com/kubernetes/sample-apiserver/tree/master</a></li>
<li>Utilize <a href="https://argo-workflows.readthedocs.io">Argo Workflows</a> to handle the workflows necessary to process different artifact types</li>
<li>Optionally use <a href="https://kueue.sigs.k8s.io/docs/overview/">Kueue</a> to handle quotas and enhanced scheduling</li>
<li>Namespaces are used to separate resources in a multi-tenant environment.</li>
</ul>
<h4 id="architecture-diagram">Architecture Diagram<a class="headerlink" href="#architecture-diagram" title="Permanent link">¶</a></h4>
<p><strong>Overview Diagram</strong></p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../img/0-arc-architecture.drawio.svg" data-desc-position="bottom"><img alt="ARC Architecture Diagram" src="../img/0-arc-architecture.drawio.svg" title="ARC Architecture"></a></p>
<p><strong>API Concept Diagram</strong></p>
<div class="panzoom-box" data-key="alt" id="panzoom0" oncontextmenu="return false;">
    
    <nav class="panzoom-nav">
    <button class="panzoom-info panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
    </svg>
</button><button class="panzoom-reset panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path>
    </svg>
</button><button class="panzoom-max panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"></path>
    </svg>
</button><button class="panzoom-min panzoom-button panzoom-hidden">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"></path>
    </svg>
</button>
    </nav>
    <pre class="mermaid"><code>---
config:
  layout: elk
---
flowchart LR
 subgraph subGraph0["Declarative Layer"]
        Order["Order (User Input)"]
        Spec["spec:&lt;br&gt;- defaults&lt;br&gt;- artifacts[]&lt;br&gt;--- &lt;br&gt;status:&lt;br&gt;- endpointGenerations&lt;br&gt;- secretGenerations"]
  end
 subgraph subGraph1["Generated Layer"]
        ArtifactWorkflow1["ArtifactWorkflow-1&lt;br&gt;(Minimal Params)"]
        ArtifactWorkflow2["ArtifactWorkflow-2&lt;br&gt;(Minimal Params)"]
        ArtifactWorkflowN["ArtifactWorkflow-N&lt;br&gt;(Minimal Params)"]
  end
 subgraph Configuration["Configuration &amp; Secrets"]
        ArtifactTypeDef@{ label: "ArtifactType (e.g., 'oci')" }
        EndpointSrc["Endpoint (Source)"]
        EndpointDst["Endpoint (Destination)"]
        EndpointSecret@{ shape: procs, label: "Secrets (e.g. Credentials)"}
  end
 subgraph Execution["Execution"]
        WorkflowTemplate["WorkflowTemplate (Argo)"]
        WorkflowInstance1["Workflow Instance"]
        WorkflowInstance2["Workflow Instance"]
  end
    Order -- contains --&gt; Spec
    Spec -- generates --&gt; ArtifactWorkflow1 &amp; ArtifactWorkflow2 &amp; ArtifactWorkflowN
    Spec -- reads &amp; tracks generations of --&gt; EndpointSrc &amp; EndpointDst &amp; EndpointSecret
    ArtifactWorkflow1 -- type --&gt; ArtifactTypeDef
    ArtifactWorkflow2 -- type --&gt; ArtifactTypeDef
    ArtifactWorkflow1 -- srcRef --&gt; EndpointSrc
    ArtifactWorkflow2 -- srcRef --&gt; EndpointSrc
    ArtifactWorkflow1 -- dstRef --&gt; EndpointDst
    ArtifactWorkflow2 -- dstRef --&gt; EndpointDst
    EndpointSrc -- secretRef --&gt; EndpointSecret
    EndpointDst -- secretRef --&gt; EndpointSecret
    ArtifactTypeDef -- workflowTemplateRef --&gt; WorkflowTemplate
    ArtifactWorkflow1 -- references --&gt; EndpointSecret
    ArtifactWorkflow2 -- references --&gt; EndpointSecret
    ArtifactWorkflow1 -- instantiates --&gt; WorkflowTemplate
    ArtifactWorkflow2 -- instantiates --&gt; WorkflowTemplate
    WorkflowTemplate -- instantiates --&gt; WorkflowInstance1 &amp; WorkflowInstance2
    WorkflowInstance1 -- mounts --&gt; EndpointSecret
    WorkflowInstance2 -- mounts --&gt; EndpointSecret

    ArtifactTypeDef@{ shape: rect}</code></pre> 
    <div class="panzoom-info-box panzoom-info-box-bottom panzoom-hidden">
Hold "Alt" / "Option" to enable pan &amp; zoom
</div>
</div>
<p>The solution shows the ARC API Server which handles storage for the custom resources / API of ARC.
<code>etcd</code> is used as storage solution.
<code>Order Controller</code> is classic Kubernetes controller implementation which reconciles <code>Orders</code> and monitors <code>Endpoints</code> and <code>Secrets</code>. In a similar fashion the <code>ArtifactWorkflow Controller</code> reconciles <code>ArtifactWorkflows</code> and instantiates and tracks Argo Workflows based on the <code>ArtifactType</code>. Both controllers are contained in the <code>ARC Controller Manager</code>.</p>
<p>An <code>Order</code> contains the information what artifacts should be processed and tracks generation numbers of referenced <code>Endpoints</code> and <code>Secrets</code> to detect changes.
An <code>Endpoint</code> contains the information about a source or destination for artifacts.
The <code>Order Controller</code> creates <code>ArtifactWorkflow</code> resources which are minimal, idempotent representations of artifacts to be processed.
When an <code>Endpoint</code> or referenced <code>Secret</code> changes (detected via generation tracking), the controller automatically recreates the rendered configuration and triggers <code>ArtifactWorkflow</code> recreation.
An <code>ArtifactType</code> specifies the processing rules and workflow templates for artifact types (e.g. <code>oci</code>, <code>helm</code>).</p>
<h4 id="pros_1">Pros<a class="headerlink" href="#pros_1" title="Permanent link">¶</a></h4>
<ul>
<li>Using dedicated <code>etcd</code> does not clutter the infra etcd</li>
<li>Storage can be changed later on if necessary</li>
<li>Keep the declarative style of Kubernetes while having complete freedom on the API implementation</li>
<li>Argo Workflows allows us to focus on the domain of the product without reinventing the wheel</li>
<li>Qotas and Fairness easy without writing code via Kueue</li>
<li><strong>Idempotency</strong>: Generation tracking ensures configuration changes are reliably detected and handled without race conditions</li>
<li><strong>Minimal Resource Overhead</strong>: Small <code>ArtifactWorkflow</code> resources with externalized configuration reduce API load and enable efficient scaling</li>
</ul>
<h4 id="cons_1">Cons<a class="headerlink" href="#cons_1" title="Permanent link">¶</a></h4>
<ul>
<li>Building addon apiservers directly on the raw api-machinery libraries requires non-trivial code that must be maintained and rebased as the raw libraries change.</li>
<li>Steep learning curve when starting the project and steeper learning curve when joining the project.</li>
<li>Generation tracking adds complexity to the reconciliation logic that must be carefully maintained</li>
</ul>
<h2 id="decision-outcome">Decision Outcome<a class="headerlink" href="#decision-outcome" title="Permanent link">¶</a></h2>
<p>Chosen Option: Solution E.</p>
<p>Because the solution is the one that provides the most flexibility while the necessity to write own code for many parts is minimized.
The flexibility comes from utilizing the CNCF projects Argo Workflows and Kueue for building the workflow engine.
The project itself can focus on the order process and the handling of endpoints.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025 Artifact Conduit Contributors
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "header.autohide", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../../assets/javascripts/panzoom.min.js"></script>
      
        <script src="../../../assets/javascripts/zoompan.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>